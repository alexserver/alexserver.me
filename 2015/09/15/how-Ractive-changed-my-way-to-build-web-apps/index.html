<!DOCTYPE html><html lang="en-US"><head><meta charset="UTF-8"><meta name="author" content="Alejandro Gomez @alexserver"><meta name="desciption" content="I speak spanish, english and javascript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>How Ractive changed my way to build web apps</title><link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Raleway:400,100,200,300,600,700"><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Open+Sans:400,300,300italic,400italic,600,600italic,700,700italic"><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Lato:400,100,100italic,300,300italic,400italic"><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Cutive+Mono"><link rel="stylesheet" type="text/css" href="//dn-staticfile.qbox.me/normalize/3.0.1/normalize.min.css"><link rel="stylesheet" type="text/css" href="/css/carbon.css"></head><body><div id="container"><div id="banner"><div class="table-cell"><h1 id="site-title"><a href="/">alexserver.me</a></h1><p id="site-subtitle">Full Stack Web Developer</p></div><div class="table-cell"><p id="site-description">I speak spanish, english and javascript</p></div><div class="table-cell text-right"><ul id="social-links"><li><a href="https://github.com/alexserver">github</a></li><li><a href="https://twitter.com/alexserver">twitter</a></li><li><a href="https://mx.linkedin.com/in/alejandrogomezarceo">linked.in</a></li></ul></div></div><div id="content"><div class="meta"><h2 class="article-title"><a href="/2015/09/15/how-Ractive-changed-my-way-to-build-web-apps/">How Ractive changed my way to build web apps</a></h2><div class="article-date"><a href="javascript:void(0);" class="extra-switch">2015-09-15</a></div></div><div class="extra">Tags: ractive, javascript, front-end, development </div><div class="extra">Categories: None</div><div class="article-content"><div class="gallery"></div><h2 id="What_is_Ractive_?">What is Ractive ?</h2><p>Ok, first things first, in order to understand what’s going here, you should hit this <a href="http://www.ractivejs.org/" target="_blank" rel="external">link</a> and embrace the awesomeness of <a href="http://www.ractivejs.org/" target="_blank" rel="external">Ractive</a>.<br>Did you get it ? no more <code>jQuery.html(&#39;&lt;div&gt;some fancy html&lt;/div&gt;&#39;)</code> anymore, right ?</p>
<h2 id="My_first_approach_to_ractive_(January,_2014)">My first approach to ractive (January, 2014)</h2><p>It was January, 2014, when I entered this new job.<br>We were told we were going to disrupt the web apps development.<br>By that time, I used to called my self a front end senior developer. I felt very comfortable writing web applications, manipulating the <strong>DOM</strong> with jQuery, or vanilla javascript (most jQuery than vanilla, I accept that jQuery was my swiss knife). I was the king on ajax in the local realm (kidding), fetching JSON data from the server, injecting it into a template engine (mostly mustache), and puting the result into a div, dynamically with jQuery; all of this in client site. Yeah, the Single Page Apps era had come.<br>So, first week in this great job with skillful devs, and I hear about this <strong>‘Ractive’</strong> library. I go into the web page, go to the docs, and see this code:</p>
<p>Html:<br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"container"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">type</span>=<span class="value">"text/ractive"</span> <span class="attribute">id</span>=<span class="value">"scriptid"</span>&gt;</span><span class="handlebars"><span class="xml"></span><br><span class="line">  </span><span class="expression">&#123;&#123;<span class="variable">foo</span>&#125;&#125;</span><span class="xml"></span><br><span class="line"></span></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>Javascript:<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> ractiveInstance = <span class="keyword">new</span> Ractive(&#123;</span><br><span class="line">  el: <span class="string">'#container'</span>,</span><br><span class="line">  template: <span class="string">'#templateid'</span>,</span><br><span class="line">  data: &#123;</span><br><span class="line">    foo: <span class="string">"bar"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>Ok, not a big deal, right ?. This library had a template part, and a javascript part. And in the javascript code you set the data you want to be rendered. Not impressed.</p>
<p>But then, I started to work with it.<br>I was commanded to create an interface for the admin section, building forms and data tables, and fancy web controls. Suddenly I started to enter into the Ractive’s mindset for working with data and views.<br>There is no need to touch the DOM, at least not that much for most of the things you want to achieve.</p>
<h2 id="Reactive_templating">Reactive templating</h2><p>My first surprise was when I realized this thing is really <strong>reactive</strong> <code>DOM</code>: You write a template once, you set the data once, you start a new <code>Ractive</code> instance, and that’s it. You don’t need to recompile the template everytime the data changes. You only need to tell Ractive: ‘Hey, this property called <code>foo</code> has changed, with a value of <code>bar</code>‘. Or: <code>ractiveInstance.set(&#39;foo&#39;, &#39;bar&#39;);</code>.<br>Voalá !</p>
<p>So, this code with jQuery:<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//data has changed</span></span><br><span class="line">foo = <span class="string">'another bar'</span>;</span><br><span class="line">html = templateEngine.render(<span class="string">'&#123;&#123;foo&#125;&#125;'</span>, &#123;foo: foo&#125;);</span><br><span class="line">$(<span class="string">'#container'</span>).html(html);</span><br></pre></td></tr></table></figure></p>
<p>Is the same as this with Ractive:<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//data has changed</span></span><br><span class="line">foo = <span class="string">'another bar'</span>;</span><br><span class="line">ractiveInstance.set(<span class="string">'foo'</span>, foo);</span><br></pre></td></tr></table></figure></p>
<p>But the list of perks go further. Ractive goes deeper on objects properties when you set the <code>magic</code> option to true. Ractive listens objects accessors to update the template when you change an object property.</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> model = &#123; message: <span class="string">'hello'</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> ractive = <span class="keyword">new</span> Ractive(&#123;</span><br><span class="line">  el: container,</span><br><span class="line">  template: <span class="string">'&lt;div&gt;message: &#123;&#123;message&#125;&#125;&lt;/div&gt;'</span>,</span><br><span class="line">  magic: <span class="literal">true</span>,</span><br><span class="line">  data: model</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// instead of doing `ractive.set( 'message', 'goodbye' )`...</span></span><br><span class="line">model.message = <span class="string">'goodbye'</span>;</span><br></pre></td></tr></table></figure>
<h2 id="DOM_being_creating_and_destroyed_on_the_fly">DOM being creating and destroyed on the fly</h2><p>Another cool thing that Ractive has is the ability to create and destroy DOM elements on the fly, obeying conditionals in the template code.<br>We don’t need anymore to set a <code>display: none</code> css style for every javascript event.<br>Let’s say for example that we have a sort of accordion div, with a header and a body which will be shown or hidden every time the head is being clicked.</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"head"</span>&gt;</span>Click me<span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"body"</span>&gt;</span></span><br><span class="line">  Now you see me, now you not...</span><br><span class="line"><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>With jQuery your approach would be something like this:<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">$(<span class="string">'.head'</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  $(<span class="string">'body'</span>).toggleClass(<span class="string">'hidden'</span>);</span><br><span class="line">  <span class="comment">//in Css you have something like: .hidden &#123;display: none;&#125;</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>But with Ractive, you go this way:<br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">on-click</span>=<span class="value">"toggleBody"</span>&gt;</span>Click me<span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">&#123;&#123;#open&#125;&#125;</span><br><span class="line"><span class="tag">&lt;<span class="title">div</span>&gt;</span> <span class="comment">&lt;!-- we don't need classes anymore for logic concerns ! --&gt;</span></span><br><span class="line">  Now you see me, now you not...</span><br><span class="line"><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">&#123;&#123;/&#125;&#125;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">ractiveInstance.on(<span class="string">'toggleBody'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.toggle(<span class="string">'open'</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>That’s it. You said in the template that everything enclosed in `{{#open}}{{/}}` is conditioned to its value. If <code>open</code> is truthy, content will exists; if not, it won’t.</p>
<h3 id="Why_is_this_so_cool_?">Why is this so cool ?</h3><p>Remember the dynamic event handling in jQuery? Let me give you a refresh.<br>When you had some rendered template in where you had to assign events to some elements, but you had to re-render the template everytime the data changed, you had to manage those events handlers manually. That was extra logic you had to programm as a price to have a “cool web app”:</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"container"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">button</span> <span class="attribute">class</span>=<span class="value">"sayhello"</span>&gt;</span>One button<span class="tag">&lt;/<span class="title">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">button</span> <span class="attribute">class</span>=<span class="value">"sayhello"</span>&gt;</span>Another button, LOL<span class="tag">&lt;/<span class="title">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//oops, data from server changed, let's recompile template and replace HTML content</span></span><br><span class="line">data = someAjaxResponseFromServer(); <span class="comment">//let's say for simplicity this is sync.</span></span><br><span class="line">template = TemplateEngine.render(myTemplate, data);</span><br><span class="line"><span class="comment">//since DOM elements were going to be destroyed, we need to release handlers.</span></span><br><span class="line">$(<span class="string">'#container .sayhello'</span>).off(<span class="string">'click'</span>);</span><br><span class="line">$(<span class="string">'#container .sayhello'</span>).on(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Hi, man'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>If you were experienced, then you went for putting an event handler to its parent container, which never changed:<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//doesn't matter how many children are destroyed or created, event handler is</span></span><br><span class="line"><span class="comment">//in parent container, but is listening to children.</span></span><br><span class="line">$(<span class="string">'#container'</span>).on(<span class="string">'click'</span>, <span class="string">'.sayhello'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Hi, man'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>Now you don’t need to do this. Ractive manages by itself all event handling. This is thanks to proxy events, which links to Ractive events. So you only need to tell Ractive that some DOM element will respond to a proxy event, and which Ractive event will be fired:<br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">on-click</span>=<span class="value">"sayHello"</span>&gt;</span>Click me<span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//sayHello is custom event</span></span><br><span class="line">ractiveInstance.on(<span class="string">'sayHello'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Hi, from Ractive'</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>Thanks to this, I was released from the responsibility of writing some repetitive code.<br>I’m not saying that dealing with advanced DOM programming is bad. Actually is good for polishing your skills. But when it comes to business, time is money, and Ractive saves you a lot of time, and it does its work pretty well !</p>
<h2 id="Creating_components_?_What’s_that_?">Creating components ? What’s that ?</h2><p>A Ractive component is an extension of Ractive’s object, but with its own data and logic, well encapsulated and following the responsibility principle.<br>This helps us to separate concerns, and have a well designed application, and also let us reuse code for our many needs.</p>
<p>So, in Ractive, let’s say you wan’t to create a form, as a component. And for every field type, you also can create a component. That way, you will end having a component for text inputs, another for selects, one more for radio buttons or check boxes, and so on. And at the end putting all of them together organized withing the main form component.</p>
<p>I prefer to lead you to the Ractive doc page about <a href="http://docs.ractivejs.org/latest/components" target="_blank" rel="external">components</a> that confusing you more. This is a very extended subject and deserves another post.</p>
<h2 id="How_hard_it_was_to_separate_concerns_those_days_?">How hard it was to separate concerns those days ?</h2><p>So, you want to create some components, and release them to the community, maybe in a github repo. Good. You only need a template part, and a javascript part. And, if you want to go fancy, some css part.<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">-- component&#10;|&#10;|-- css&#10;|-- html&#10;|-- js</span><br></pre></td></tr></table></figure></p>
<p>How do you put’em together and make them easy to work with a main Ractive instance ?<br>Javascript files are easy, you can set them as common.js modules, and use webpack or browserify.<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> Ractive.extend(&#123;</span><br><span class="line">    el: <span class="string">'#container'</span>,</span><br><span class="line">    template: <span class="string">'#componentTemplate'</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>But html files, and css files, those are hard to integrate with a running webapp. Because either you load them via AJAX and add them dynamically to the document, or you serve them from the begining.<br>Unlike <code>React</code>, where you can put the logic and the view in the same physical file (thanks to JSX). In Ractive you have no way to put html and javascript together.<br>One solution would be to accept a string template from the constructor:<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>(<span class="params">template</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> Ractive.extend(&#123;</span><br><span class="line">    el: <span class="string">'#container'</span>,</span><br><span class="line">    template: template</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>but, where’s the encapsulation here ?<br>Another way to go (not a one I like) is to put all template into a long string in the js file:<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> Ractive.extend(&#123;</span><br><span class="line">    template: <span class="string">'&lt;div&gt;Some Large template &#123;&#123;foo&#125;&#125;&lt;/div&gt;'</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>The template in this Component will be very hard to maintain.<br>So at the end we ended with a convention. Every file in html file should be added to the html document. Every css file should be also linked in the head as a style sheet.<br>This was easy for us, but won’t for the community.</p>
<h2 id="Some_monts_later,_what_is_new_to_my_eyes_?">Some monts later, what is new to my eyes ?</h2><p>Yeah, I came to Ractive plugins directory, and stumbled upon this <a href="https://github.com/JonDum/ractive-datatable" target="_blank" rel="external">repo</a>.</p>
<p>Apparently, Ractive evolved in such a better way, that releasing components is so much easier nowadays, that you only have to install it, and tell Ractive instance about its location.<br>Installation:<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">npm install ractive-datatable --save</span><br></pre></td></tr></table></figure></p>
<p>Configuration:<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">Ractive.extend(&#123;</span><br><span class="line">    ...</span><br><span class="line">    components: &#123;</span><br><span class="line">        datatable: <span class="built_in">require</span>(<span class="string">'ractive-datatable'</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    ...</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>Usage:<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#60;datatable data=&#39;&#123;&#123;data&#125;&#125;&#39; on-edit=&#39;dataedited&#39; config=&#39;&#123;&#123;config&#125;&#125;&#39; filter=&#39;&#123;&#123;filter&#125;&#125;&#39;&#62;&#60;/datatable&#62;</span><br></pre></td></tr></table></figure></p>
<h2 id="Why_is_this_so_important_?">Why is this so important ?</h2><p>I don’t know how aware you are about the front end scene nowadays, but it is growing faster than ever. And that’s because of open source and active collaboration from the community. The most hype libraries are being cloned many times daily, a lot of issues are being raised, also not to forget the commits and pull requests.</p>
<p>React has a bunch of open source <a href="http://react-components.com/" target="_blank" rel="external">components</a> created by the enthusiasts, and I might bet angular has the same <a href="http://ngmodules.org/" target="_blank" rel="external">movement</a> going on.<br>But how about Ractive ? I think Ractive is one of the coolest libraries in the front end neighborhood, not only because it disrupts the way DOM manipulation used to be, but because it does pretty well its job about concerns separation: it separates the view from the logic. I mean, you specify some events in the template, and set control flow, but you don’t have to write any line of javascript in there, because in the javascript layer you can do everything else.</p>
<p>So now, with the ability of adding plugins, decorators, components in such an easy way, I really hope the community will take off and create some cool stuffs.<br>I even feel myself motivated to write some components, but I’ll save another post for that.</p>
<p>Meanwhile, visit <a href="http://docs.ractivejs.org" target="_blank" rel="external">Ractive</a> home page and its <a href="http://docs.ractivejs.org/latest/plugins" target="_blank" rel="external">plugins</a> section.</p>
<p>Long live Ractive !</p>
</div><nav class="pagination"><a id="right-navigator" href="/2015/07/01/modern-web-apps-at-frontend-masters/">Modern web apps at frontend masters</a></nav><!--mathjax config similar to math.stackexchange--><script type="text/x-mathjax-config">MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [ ['$','$'], ["\\(","\\)"] ],
    processEscapes: true
  }
});</script><script type="text/x-mathjax-config">MathJax.Hub.Config({
  tex2jax: {
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
  }
});</script><script type="text/x-mathjax-config">MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
});</script><script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script></div><nav id="footer"><ul id="footer-links"><li><a href="/about">About</a></li><li><a href="/archives">Archives</a></li><li><a href="https://github.com/alexserver/carbon" class="out-site">Theme.Carbon</a></li><li><a href="http://hexo.io/" class="out-site">Hexo</a></li></ul></nav></div></body><script src="//dn-staticfile.qbox.me/jquery/2.1.1/jquery.min.js"></script><script src="//dn-staticfile.qbox.me/jquery.pjax/1.9.2/jquery.pjax.min.js"></script><script src="/js/carbon.js"></script></html>